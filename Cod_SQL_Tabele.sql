  CREATE TABLE "ADOPTATORI" 
   (	"ID_ADOPTATOR" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"NUME" VARCHAR2(50), 
	"PRENUME" VARCHAR2(50), 
	"TELEFON" VARCHAR2(20), 
	"ADRESA" VARCHAR2(50), 
	 PRIMARY KEY ("ID_ADOPTATOR")
  USING INDEX  ENABLE
   ) ;

  CREATE TABLE "ADOPTII" 
   (	"ID_ADOPTIE" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"ID_ANIMAL" NUMBER NOT NULL ENABLE, 
	"ID_ADOPTATOR" NUMBER NOT NULL ENABLE, 
	"DATA_ADOPTIEI" DATE DEFAULT SYSDATE, 
	 PRIMARY KEY ("ID_ADOPTIE")
  USING INDEX  ENABLE
   ) ;

  CREATE TABLE "ANIMALE" 
   (	"ID_ANIMAL" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"NUME" VARCHAR2(50) NOT NULL ENABLE, 
	"ID_CATEGORIE" NUMBER, 
	"ID_HRANA" NUMBER, 
	"ID_DONATOR" NUMBER, 
	"GREUTATE" NUMBER(5,2), 
	"TALIE" VARCHAR2(50), 
	"DATA_INTRARE" DATE DEFAULT SYSDATE, 
	"ESTE_ADOPTAT" NUMBER(1,0) DEFAULT 0, 
	 CHECK (ESTE_ADOPTAT IN (0,1)) ENABLE, 
	 PRIMARY KEY ("ID_ANIMAL")
  USING INDEX  ENABLE
   ) ;

  CREATE TABLE "CATEGORII" 
   (	"ID_CATEGORIE" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"NUME_CATEGORIE" VARCHAR2(50) NOT NULL ENABLE, 
	 PRIMARY KEY ("ID_CATEGORIE")
  USING INDEX  ENABLE
   ) ;

  CREATE TABLE "CONSULTATII" 
   (	"ID_CONSULTATIE" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"ID_ANIMAL" NUMBER NOT NULL ENABLE, 
	"ID_MEDIC" NUMBER NOT NULL ENABLE, 
	"DATA_CONSULTATIE" DATE DEFAULT SYSDATE, 
	"TIP_INTERVENTIE" VARCHAR2(100), 
	"DIAGNOSTIC" VARCHAR2(200), 
	 PRIMARY KEY ("ID_CONSULTATIE")
  USING INDEX  ENABLE
   ) ;

  CREATE TABLE "DONATORI" 
   (	"ID_DONATOR" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"NUME" VARCHAR2(50), 
	"PRENUME" VARCHAR2(50), 
	"TELEFON" VARCHAR2(20), 
	"DATA_DONARII_INITIALE" DATE, 
	 PRIMARY KEY ("ID_DONATOR")
  USING INDEX  ENABLE
   ) ;

  CREATE TABLE "HRANA" 
   (	"ID_HRANA" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"TIP_HRANA" VARCHAR2(50) NOT NULL ENABLE, 
	"DATA_EXPIRARE" DATE, 
	"DATA_ACHIZITIE" DATE, 
	 PRIMARY KEY ("ID_HRANA")
  USING INDEX  ENABLE
   ) ;

  CREATE TABLE "MEDICAMENTE" 
   (	"ID_MEDICAMENT" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"DENUMIRE" VARCHAR2(100), 
	 PRIMARY KEY ("ID_MEDICAMENT")
  USING INDEX  ENABLE
   ) ;

  CREATE TABLE "MEDICI" 
   (	"ID_MEDIC" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"NUME" VARCHAR2(50), 
	"PRENUME" VARCHAR2(50), 
	"TELEFON" VARCHAR2(20), 
	 PRIMARY KEY ("ID_MEDIC")
  USING INDEX  ENABLE
   ) ;

  CREATE TABLE "TRATAMENTE_DETALIU" 
   (	"ID_DETALIU" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"ID_CONSULTATIE" NUMBER NOT NULL ENABLE, 
	"ID_MEDICAMENT" NUMBER NOT NULL ENABLE, 
	"DOZA" VARCHAR2(50), 
	 PRIMARY KEY ("ID_DETALIU")
  USING INDEX  ENABLE
   ) ;

  ALTER TABLE "ADOPTII" ADD CONSTRAINT "FK_ADOPT_ANIMAL" FOREIGN KEY ("ID_ANIMAL")
	  REFERENCES "ANIMALE" ("ID_ANIMAL") ENABLE;
  ALTER TABLE "ADOPTII" ADD CONSTRAINT "FK_ADOPT_PERS" FOREIGN KEY ("ID_ADOPTATOR")
	  REFERENCES "ADOPTATORI" ("ID_ADOPTATOR") ENABLE;

  CREATE OR REPLACE EDITIONABLE TRIGGER "TRG_UPDATE_STATUS_ADOPTIE" 
AFTER INSERT ON ADOPTII
FOR EACH ROW
BEGIN
    -- cand se insereaza o adoptie noua, cautam animalul si il marcam ca adoptat (1)
    UPDATE ANIMALE
    SET ESTE_ADOPTAT = 1
    WHERE ID_ANIMAL = :NEW.ID_ANIMAL;
END;
/
ALTER TRIGGER "TRG_UPDATE_STATUS_ADOPTIE" ENABLE;

  ALTER TABLE "ANIMALE" ADD CONSTRAINT "FK_ANIM_CATEG" FOREIGN KEY ("ID_CATEGORIE")
	  REFERENCES "CATEGORII" ("ID_CATEGORIE") ENABLE;
  ALTER TABLE "ANIMALE" ADD CONSTRAINT "FK_ANIM_DONATOR" FOREIGN KEY ("ID_DONATOR")
	  REFERENCES "DONATORI" ("ID_DONATOR") ENABLE;
  ALTER TABLE "ANIMALE" ADD CONSTRAINT "FK_ANIM_HRANA" FOREIGN KEY ("ID_HRANA")
	  REFERENCES "HRANA" ("ID_HRANA") ENABLE;

  ALTER TABLE "CONSULTATII" ADD CONSTRAINT "FK_CONS_ANIMAL" FOREIGN KEY ("ID_ANIMAL")
	  REFERENCES "ANIMALE" ("ID_ANIMAL") ENABLE;
  ALTER TABLE "CONSULTATII" ADD CONSTRAINT "FK_CONS_MEDIC" FOREIGN KEY ("ID_MEDIC")
	  REFERENCES "MEDICI" ("ID_MEDIC") ENABLE;

  ALTER TABLE "TRATAMENTE_DETALIU" ADD CONSTRAINT "FK_TRAT_CONS" FOREIGN KEY ("ID_CONSULTATIE")
	  REFERENCES "CONSULTATII" ("ID_CONSULTATIE") ENABLE;
  ALTER TABLE "TRATAMENTE_DETALIU" ADD CONSTRAINT "FK_TRAT_MED" FOREIGN KEY ("ID_MEDICAMENT")
	  REFERENCES "MEDICAMENTE" ("ID_MEDICAMENT") ENABLE;











create or replace TRIGGER trg_update_status_adoptie
AFTER INSERT ON ADOPTII
FOR EACH ROW
BEGIN
    -- cand se insereaza o adoptie noua, cautam animalul si il marcam ca adoptat (1)
    UPDATE ANIMALE
    SET ESTE_ADOPTAT = 1
    WHERE ID_ANIMAL = :NEW.ID_ANIMAL;
END;
/